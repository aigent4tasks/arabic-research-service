{"ast":null,"code":"import _objectSpread from\"/home/ubuntu/arabic-research-service/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{db}from'../firebaseConfig';import{collection,addDoc,getDocs,doc,updateDoc,deleteDoc,query,where,orderBy}from'firebase/firestore';const BOOKS_COLLECTION='books';// إضافة كتاب جديد\nexport const addBook=async bookData=>{try{const docRef=await addDoc(collection(db,BOOKS_COLLECTION),_objectSpread(_objectSpread({},bookData),{},{createdAt:new Date().toISOString()}));return{success:true,id:docRef.id};}catch(error){console.error('خطأ في إضافة الكتاب:',error);return{success:false,error:error.message};}};// جلب جميع الكتب\nexport const getAllBooks=async()=>{try{const querySnapshot=await getDocs(collection(db,BOOKS_COLLECTION));const books=[];querySnapshot.forEach(doc=>{books.push(_objectSpread({id:doc.id},doc.data()));});return{success:true,data:books};}catch(error){console.error('خطأ في جلب الكتب:',error);return{success:false,error:error.message};}};// جلب الكتب المجانية\nexport const getFreeBooks=async()=>{try{const q=query(collection(db,BOOKS_COLLECTION),where('isFree','==',true),orderBy('createdAt','desc'));const querySnapshot=await getDocs(q);const books=[];querySnapshot.forEach(doc=>{books.push(_objectSpread({id:doc.id},doc.data()));});return{success:true,data:books};}catch(error){console.error('خطأ في جلب الكتب المجانية:',error);return{success:false,error:error.message};}};// جلب الكتب المدفوعة\nexport const getPaidBooks=async()=>{try{const q=query(collection(db,BOOKS_COLLECTION),where('isFree','==',false),orderBy('createdAt','desc'));const querySnapshot=await getDocs(q);const books=[];querySnapshot.forEach(doc=>{books.push(_objectSpread({id:doc.id},doc.data()));});return{success:true,data:books};}catch(error){console.error('خطأ في جلب الكتب المدفوعة:',error);return{success:false,error:error.message};}};// تحديث كتاب\nexport const updateBook=async(bookId,updatedData)=>{try{const bookRef=doc(db,BOOKS_COLLECTION,bookId);await updateDoc(bookRef,_objectSpread(_objectSpread({},updatedData),{},{updatedAt:new Date().toISOString()}));return{success:true};}catch(error){console.error('خطأ في تحديث الكتاب:',error);return{success:false,error:error.message};}};// حذف كتاب\nexport const deleteBook=async bookId=>{try{await deleteDoc(doc(db,BOOKS_COLLECTION,bookId));return{success:true};}catch(error){console.error('خطأ في حذف الكتاب:',error);return{success:false,error:error.message};}};// جلب الكتب حسب التصنيف\nexport const getBooksByCategory=async category=>{try{const q=query(collection(db,BOOKS_COLLECTION),where('category','==',category),orderBy('createdAt','desc'));const querySnapshot=await getDocs(q);const books=[];querySnapshot.forEach(doc=>{books.push(_objectSpread({id:doc.id},doc.data()));});return{success:true,data:books};}catch(error){console.error('خطأ في جلب الكتب حسب التصنيف:',error);return{success:false,error:error.message};}};","map":{"version":3,"names":["db","collection","addDoc","getDocs","doc","updateDoc","deleteDoc","query","where","orderBy","BOOKS_COLLECTION","addBook","bookData","docRef","_objectSpread","createdAt","Date","toISOString","success","id","error","console","message","getAllBooks","querySnapshot","books","forEach","push","data","getFreeBooks","q","getPaidBooks","updateBook","bookId","updatedData","bookRef","updatedAt","deleteBook","getBooksByCategory","category"],"sources":["/home/ubuntu/arabic-research-service/src/services/booksService.js"],"sourcesContent":["import { db } from '../firebaseConfig';\nimport { \n  collection, \n  addDoc, \n  getDocs, \n  doc, \n  updateDoc, \n  deleteDoc, \n  query, \n  where, \n  orderBy \n} from 'firebase/firestore';\n\nconst BOOKS_COLLECTION = 'books';\n\n// إضافة كتاب جديد\nexport const addBook = async (bookData) => {\n  try {\n    const docRef = await addDoc(collection(db, BOOKS_COLLECTION), {\n      ...bookData,\n      createdAt: new Date().toISOString()\n    });\n    return { success: true, id: docRef.id };\n  } catch (error) {\n    console.error('خطأ في إضافة الكتاب:', error);\n    return { success: false, error: error.message };\n  }\n};\n\n// جلب جميع الكتب\nexport const getAllBooks = async () => {\n  try {\n    const querySnapshot = await getDocs(collection(db, BOOKS_COLLECTION));\n    const books = [];\n    querySnapshot.forEach((doc) => {\n      books.push({ id: doc.id, ...doc.data() });\n    });\n    return { success: true, data: books };\n  } catch (error) {\n    console.error('خطأ في جلب الكتب:', error);\n    return { success: false, error: error.message };\n  }\n};\n\n// جلب الكتب المجانية\nexport const getFreeBooks = async () => {\n  try {\n    const q = query(\n      collection(db, BOOKS_COLLECTION), \n      where('isFree', '==', true),\n      orderBy('createdAt', 'desc')\n    );\n    const querySnapshot = await getDocs(q);\n    const books = [];\n    querySnapshot.forEach((doc) => {\n      books.push({ id: doc.id, ...doc.data() });\n    });\n    return { success: true, data: books };\n  } catch (error) {\n    console.error('خطأ في جلب الكتب المجانية:', error);\n    return { success: false, error: error.message };\n  }\n};\n\n// جلب الكتب المدفوعة\nexport const getPaidBooks = async () => {\n  try {\n    const q = query(\n      collection(db, BOOKS_COLLECTION), \n      where('isFree', '==', false),\n      orderBy('createdAt', 'desc')\n    );\n    const querySnapshot = await getDocs(q);\n    const books = [];\n    querySnapshot.forEach((doc) => {\n      books.push({ id: doc.id, ...doc.data() });\n    });\n    return { success: true, data: books };\n  } catch (error) {\n    console.error('خطأ في جلب الكتب المدفوعة:', error);\n    return { success: false, error: error.message };\n  }\n};\n\n// تحديث كتاب\nexport const updateBook = async (bookId, updatedData) => {\n  try {\n    const bookRef = doc(db, BOOKS_COLLECTION, bookId);\n    await updateDoc(bookRef, {\n      ...updatedData,\n      updatedAt: new Date().toISOString()\n    });\n    return { success: true };\n  } catch (error) {\n    console.error('خطأ في تحديث الكتاب:', error);\n    return { success: false, error: error.message };\n  }\n};\n\n// حذف كتاب\nexport const deleteBook = async (bookId) => {\n  try {\n    await deleteDoc(doc(db, BOOKS_COLLECTION, bookId));\n    return { success: true };\n  } catch (error) {\n    console.error('خطأ في حذف الكتاب:', error);\n    return { success: false, error: error.message };\n  }\n};\n\n// جلب الكتب حسب التصنيف\nexport const getBooksByCategory = async (category) => {\n  try {\n    const q = query(\n      collection(db, BOOKS_COLLECTION), \n      where('category', '==', category),\n      orderBy('createdAt', 'desc')\n    );\n    const querySnapshot = await getDocs(q);\n    const books = [];\n    querySnapshot.forEach((doc) => {\n      books.push({ id: doc.id, ...doc.data() });\n    });\n    return { success: true, data: books };\n  } catch (error) {\n    console.error('خطأ في جلب الكتب حسب التصنيف:', error);\n    return { success: false, error: error.message };\n  }\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}