{"ast":null,"code":"import _objectSpread from\"/home/ubuntu/arabic-research-service/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{db}from'../firebaseConfig';import{collection,addDoc,getDocs,doc,updateDoc,deleteDoc,query,where,orderBy}from'firebase/firestore';const BLOG_POSTS_COLLECTION='blogPosts';// إضافة تدوينة علمية جديدة\nexport const addBlogPost=async postData=>{try{const docRef=await addDoc(collection(db,BLOG_POSTS_COLLECTION),_objectSpread(_objectSpread({},postData),{},{createdAt:new Date().toISOString()}));return{success:true,id:docRef.id};}catch(error){console.error('خطأ في إضافة التدوينة:',error);return{success:false,error:error.message};}};// جلب جميع التدوينات العلمية\nexport const getAllBlogPosts=async()=>{try{const q=query(collection(db,BLOG_POSTS_COLLECTION),orderBy('createdAt','desc'));const querySnapshot=await getDocs(q);const posts=[];querySnapshot.forEach(doc=>{posts.push(_objectSpread({id:doc.id},doc.data()));});return{success:true,data:posts};}catch(error){console.error('خطأ في جلب التدوينات:',error);return{success:false,error:error.message};}};// جلب التدوينات حسب العلامات (Tags)\nexport const getBlogPostsByTag=async tag=>{try{const q=query(collection(db,BLOG_POSTS_COLLECTION),where('tags','array-contains',tag),orderBy('createdAt','desc'));const querySnapshot=await getDocs(q);const posts=[];querySnapshot.forEach(doc=>{posts.push(_objectSpread({id:doc.id},doc.data()));});return{success:true,data:posts};}catch(error){console.error('خطأ في جلب التدوينات حسب العلامة:',error);return{success:false,error:error.message};}};// تحديث تدوينة علمية\nexport const updateBlogPost=async(postId,updatedData)=>{try{const postRef=doc(db,BLOG_POSTS_COLLECTION,postId);await updateDoc(postRef,_objectSpread(_objectSpread({},updatedData),{},{updatedAt:new Date().toISOString()}));return{success:true};}catch(error){console.error('خطأ في تحديث التدوينة:',error);return{success:false,error:error.message};}};// حذف تدوينة علمية\nexport const deleteBlogPost=async postId=>{try{await deleteDoc(doc(db,BLOG_POSTS_COLLECTION,postId));return{success:true};}catch(error){console.error('خطأ في حذف التدوينة:',error);return{success:false,error:error.message};}};// البحث في التدوينات\nexport const searchBlogPosts=async searchTerm=>{try{// ملاحظة: Firestore لا يدعم البحث النصي المتقدم بشكل مباشر\n// هذا مثال بسيط للبحث في العناوين\nconst querySnapshot=await getDocs(collection(db,BLOG_POSTS_COLLECTION));const posts=[];querySnapshot.forEach(doc=>{const data=doc.data();if(data.title.toLowerCase().includes(searchTerm.toLowerCase())||data.content.toLowerCase().includes(searchTerm.toLowerCase())){posts.push(_objectSpread({id:doc.id},data));}});return{success:true,data:posts};}catch(error){console.error('خطأ في البحث في التدوينات:',error);return{success:false,error:error.message};}};","map":{"version":3,"names":["db","collection","addDoc","getDocs","doc","updateDoc","deleteDoc","query","where","orderBy","BLOG_POSTS_COLLECTION","addBlogPost","postData","docRef","_objectSpread","createdAt","Date","toISOString","success","id","error","console","message","getAllBlogPosts","q","querySnapshot","posts","forEach","push","data","getBlogPostsByTag","tag","updateBlogPost","postId","updatedData","postRef","updatedAt","deleteBlogPost","searchBlogPosts","searchTerm","title","toLowerCase","includes","content"],"sources":["/home/ubuntu/arabic-research-service/src/services/blogPostsService.js"],"sourcesContent":["import { db } from '../firebaseConfig';\nimport { \n  collection, \n  addDoc, \n  getDocs, \n  doc, \n  updateDoc, \n  deleteDoc, \n  query, \n  where, \n  orderBy \n} from 'firebase/firestore';\n\nconst BLOG_POSTS_COLLECTION = 'blogPosts';\n\n// إضافة تدوينة علمية جديدة\nexport const addBlogPost = async (postData) => {\n  try {\n    const docRef = await addDoc(collection(db, BLOG_POSTS_COLLECTION), {\n      ...postData,\n      createdAt: new Date().toISOString()\n    });\n    return { success: true, id: docRef.id };\n  } catch (error) {\n    console.error('خطأ في إضافة التدوينة:', error);\n    return { success: false, error: error.message };\n  }\n};\n\n// جلب جميع التدوينات العلمية\nexport const getAllBlogPosts = async () => {\n  try {\n    const q = query(\n      collection(db, BLOG_POSTS_COLLECTION),\n      orderBy('createdAt', 'desc')\n    );\n    const querySnapshot = await getDocs(q);\n    const posts = [];\n    querySnapshot.forEach((doc) => {\n      posts.push({ id: doc.id, ...doc.data() });\n    });\n    return { success: true, data: posts };\n  } catch (error) {\n    console.error('خطأ في جلب التدوينات:', error);\n    return { success: false, error: error.message };\n  }\n};\n\n// جلب التدوينات حسب العلامات (Tags)\nexport const getBlogPostsByTag = async (tag) => {\n  try {\n    const q = query(\n      collection(db, BLOG_POSTS_COLLECTION), \n      where('tags', 'array-contains', tag),\n      orderBy('createdAt', 'desc')\n    );\n    const querySnapshot = await getDocs(q);\n    const posts = [];\n    querySnapshot.forEach((doc) => {\n      posts.push({ id: doc.id, ...doc.data() });\n    });\n    return { success: true, data: posts };\n  } catch (error) {\n    console.error('خطأ في جلب التدوينات حسب العلامة:', error);\n    return { success: false, error: error.message };\n  }\n};\n\n// تحديث تدوينة علمية\nexport const updateBlogPost = async (postId, updatedData) => {\n  try {\n    const postRef = doc(db, BLOG_POSTS_COLLECTION, postId);\n    await updateDoc(postRef, {\n      ...updatedData,\n      updatedAt: new Date().toISOString()\n    });\n    return { success: true };\n  } catch (error) {\n    console.error('خطأ في تحديث التدوينة:', error);\n    return { success: false, error: error.message };\n  }\n};\n\n// حذف تدوينة علمية\nexport const deleteBlogPost = async (postId) => {\n  try {\n    await deleteDoc(doc(db, BLOG_POSTS_COLLECTION, postId));\n    return { success: true };\n  } catch (error) {\n    console.error('خطأ في حذف التدوينة:', error);\n    return { success: false, error: error.message };\n  }\n};\n\n// البحث في التدوينات\nexport const searchBlogPosts = async (searchTerm) => {\n  try {\n    // ملاحظة: Firestore لا يدعم البحث النصي المتقدم بشكل مباشر\n    // هذا مثال بسيط للبحث في العناوين\n    const querySnapshot = await getDocs(collection(db, BLOG_POSTS_COLLECTION));\n    const posts = [];\n    querySnapshot.forEach((doc) => {\n      const data = doc.data();\n      if (data.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n          data.content.toLowerCase().includes(searchTerm.toLowerCase())) {\n        posts.push({ id: doc.id, ...data });\n      }\n    });\n    return { success: true, data: posts };\n  } catch (error) {\n    console.error('خطأ في البحث في التدوينات:', error);\n    return { success: false, error: error.message };\n  }\n};\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}